<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Command Center — ABC Logistics</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="app">

  <!-- SIDEBAR -->
  <aside id="sidebar">
    <div class="brand">
      <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <rect width="36" height="36" rx="8" fill="rgba(255,255,255,0.12)"/>
        <!-- Truck body -->
        <rect x="4" y="14" width="18" height="12" rx="2" fill="white"/>
        <!-- Cab -->
        <path d="M22 18 L22 26 L31 26 L31 21 L28 18 Z" fill="white"/>
        <!-- Wheels -->
        <circle cx="9" cy="27" r="3" fill="#1a3a5c"/>
        <circle cx="25" cy="27" r="3" fill="#1a3a5c"/>
        <!-- Windshield -->
        <path d="M23 19 L23 23 L29 23 L29 21 L26.5 19 Z" fill="#1a3a5c"/>
      </svg>
      <div>
        <span class="brand-name">ABC Logistics</span>
        <span class="brand-sub">Command Center</span>
      </div>
    </div>
    <nav>
      <ul>
        <li>
          <a href="#" data-section="dashboard" class="active">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <rect x="1" y="1" width="6" height="6" rx="1" fill="currentColor"/>
              <rect x="9" y="1" width="6" height="6" rx="1" fill="currentColor"/>
              <rect x="1" y="9" width="6" height="6" rx="1" fill="currentColor"/>
              <rect x="9" y="9" width="6" height="6" rx="1" fill="currentColor"/>
            </svg>
            Dashboard
          </a>
        </li>
        <li>
          <a href="#" data-section="add-item">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/>
              <line x1="8" y1="4.5" x2="8" y2="11.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              <line x1="4.5" y1="8" x2="11.5" y2="8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            Add Item
          </a>
        </li>
        <li>
          <a href="#" data-section="inventory">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <rect x="1" y="2" width="14" height="2.5" rx="1" fill="currentColor"/>
              <rect x="1" y="6.75" width="14" height="2.5" rx="1" fill="currentColor"/>
              <rect x="1" y="11.5" width="14" height="2.5" rx="1" fill="currentColor"/>
            </svg>
            Inventory List
          </a>
        </li>
        <li>
          <a href="about.html">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <circle cx="8" cy="5.5" r="2.5" stroke="currentColor" stroke-width="1.5"/>
              <path d="M2 14c0-3.314 2.686-5 6-5s6 1.686 6 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            About Developer
          </a>
        </li>
      </ul>
    </nav>
  </aside>

  <!-- MAIN CONTENT -->
  <main id="main-content">

    <!-- DASHBOARD SECTION -->
    <section id="dashboard" class="section active">
      <h1 class="page-title">Dashboard</h1>

      <!-- Dismissible warning banner — shown when duplicate items are detected and merged on load -->
      <div id="duplicate-warning" class="alert-banner alert-warning" style="display:none;" role="alert">
        <svg width="20" height="20" viewBox="0 0 22 22" fill="none" aria-hidden="true">
          <path d="M11 3 L20 19 L2 19 Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round" fill="none"/>
          <line x1="11" y1="9" x2="11" y2="14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <circle cx="11" cy="16.5" r="0.9" fill="currentColor"/>
        </svg>
        <div class="alert-body">
          <strong>Duplicate items detected and merged.</strong>
          <span id="duplicate-detail"></span>
        </div>
        <button class="alert-dismiss" id="dismiss-warning" aria-label="Dismiss warning">&times;</button>
      </div>

      <div class="kpi-grid">

        <!-- Total Items -->
        <div class="kpi-card">
          <div class="kpi-icon">
            <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M11 2 L20 6.5 L20 15.5 L11 20 L2 15.5 L2 6.5 Z" stroke="white" stroke-width="1.5" stroke-linejoin="round" fill="none"/>
              <path d="M11 2 L11 20" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M2 6.5 L11 11 L20 6.5" stroke="white" stroke-width="1.5" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="kpi-body">
            <p class="kpi-label">Total Items</p>
            <p class="kpi-value" id="kpi-total-items">—</p>
          </div>
        </div>

        <!-- Total Inventory Value -->
        <div class="kpi-card">
          <div class="kpi-icon">
            <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <circle cx="11" cy="11" r="9" stroke="white" stroke-width="1.5" fill="none"/>
              <path d="M11 5.5 L11 16.5" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M8.5 8 Q8.5 6.5 11 6.5 Q13.5 6.5 13.5 8.5 Q13.5 10 11 10.5 Q8.5 11 8.5 13 Q8.5 15.5 11 15.5 Q13.5 15.5 13.5 14" stroke="white" stroke-width="1.5" stroke-linecap="round" fill="none"/>
            </svg>
          </div>
          <div class="kpi-body">
            <p class="kpi-label">Total Inventory Value</p>
            <p class="kpi-value" id="kpi-total-value">—</p>
          </div>
        </div>

        <!-- Low Stock Alerts -->
        <div class="kpi-card">
          <div class="kpi-icon" style="background: var(--color-warning);">
            <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M11 3 L20 19 L2 19 Z" stroke="white" stroke-width="1.5" stroke-linejoin="round" fill="none"/>
              <line x1="11" y1="9" x2="11" y2="14" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
              <circle cx="11" cy="16.5" r="0.9" fill="white"/>
            </svg>
          </div>
          <div class="kpi-body">
            <p class="kpi-label">Low Stock Alerts</p>
            <p class="kpi-value" id="kpi-low-stock">—</p>
          </div>
        </div>

        <!-- Categories in Use -->
        <div class="kpi-card">
          <div class="kpi-icon">
            <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <rect x="2" y="2" width="7.5" height="7.5" rx="1.5" fill="white"/>
              <rect x="12.5" y="2" width="7.5" height="7.5" rx="1.5" fill="white"/>
              <rect x="2" y="12.5" width="7.5" height="7.5" rx="1.5" fill="white"/>
              <rect x="12.5" y="12.5" width="7.5" height="7.5" rx="1.5" fill="white"/>
            </svg>
          </div>
          <div class="kpi-body">
            <p class="kpi-label">Categories in Use</p>
            <p class="kpi-value" id="kpi-categories">—</p>
          </div>
        </div>

      </div>

      <!-- Recent Activity Panel -->
      <div class="panel">
        <div class="panel-header">
          <h2>Recent Activity</h2>
          <span class="panel-sub">Last 5 items added</span>
        </div>
        <div class="table-wrapper">
          <table id="recent-table">
            <thead>
              <tr>
                <th>Item ID</th>
                <th>Name</th>
                <th>Category</th>
                <th>Value</th>
                <th>Status</th>
                <th>Date Added</th>
              </tr>
            </thead>
            <tbody id="recent-tbody"></tbody>
          </table>
        </div>
      </div>

      <!-- Inventory Chart Panel -->
      <div class="panel" id="chart-panel">
        <div class="panel-header">
          <h2>Inventory Quantities</h2>
          <span class="panel-sub">All items by quantity on hand</span>
        </div>
        <div class="chart-canvas-wrapper">
          <canvas id="inventory-chart" aria-label="Bar chart of inventory quantities" role="img"></canvas>
        </div>
      </div>

      <!-- Dashboard Item Lookup Panel -->
      <div class="panel" id="dashboard-search-panel">
        <div class="panel-header">
          <h2>Item Lookup</h2>
          <div class="list-toolbar">
            <input type="text" id="dashboard-search-input" placeholder="Search by name or ID...">
          </div>
        </div>
        <div class="table-wrapper" id="dashboard-results-wrapper">
          <table id="dashboard-results-table">
            <thead>
              <tr>
                <th>Item ID</th>
                <th>Name</th>
                <th>Category</th>
                <th>Qty</th>
                <th>Unit Price</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="dashboard-results-tbody"></tbody>
          </table>
        </div>
        <p id="dashboard-no-results" class="empty-msg" style="display:none;"></p>
      </div>
    </section>

    <!-- ADD ITEM SECTION -->
    <section id="add-item" class="section">
      <h1 class="page-title">Add Inventory Item</h1>
      <div class="panel">
        <div class="panel-header">
          <h2>New Item Form</h2>
        </div>
        <form id="inventory-form" novalidate>
          <div class="form-grid">

            <div class="form-group">
              <label for="f-name">Item Name *</label>
              <input type="text" id="f-name" placeholder="e.g. Forklift Model X" required>
              <span class="field-error" id="err-name"></span>
            </div>

            <div class="form-group">
              <label for="f-category">Category *</label>
              <select id="f-category" required>
                <option value="">Select category...</option>
                <option value="Equipment">Equipment</option>
                <option value="Supplies">Supplies</option>
                <option value="Raw Materials">Raw Materials</option>
                <option value="Finished Goods">Finished Goods</option>
              </select>
              <span class="field-error" id="err-category"></span>
            </div>

            <div class="form-group">
              <label for="f-quantity">Quantity *</label>
              <input type="number" id="f-quantity" min="0" step="1" placeholder="0" required>
              <span class="field-error" id="err-quantity"></span>
            </div>

            <div class="form-group">
              <label for="f-unitPrice">Unit Price ($) *</label>
              <input type="number" id="f-unitPrice" min="0" step="0.01" placeholder="0.00" required>
              <span class="field-error" id="err-unitPrice"></span>
            </div>

            <div class="form-group">
              <label for="f-totalValue">Total Value (auto)</label>
              <input type="text" id="f-totalValue" readonly placeholder="$0.00">
            </div>

            <div class="form-group">
              <label for="f-status">Status *</label>
              <select id="f-status" required>
                <option value="In Stock">In Stock</option>
                <option value="Low Stock">Low Stock</option>
                <option value="Out of Stock">Out of Stock</option>
              </select>
            </div>

          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Add Item</button>
            <button type="button" id="reset-form-btn" class="btn btn-secondary">Clear</button>
          </div>
        </form>
        <div id="form-feedback" aria-live="polite"></div>
      </div>
    </section>

    <!-- INVENTORY LIST SECTION -->
    <section id="inventory" class="section">
      <h1 class="page-title">Inventory List</h1>
      <div class="panel">
        <div class="panel-header">
          <h2>All Items</h2>
          <div class="list-toolbar">
            <input type="text" id="search-input" placeholder="Search items...">
            <select id="filter-category">
              <option value="">All Categories</option>
              <option value="Equipment">Equipment</option>
              <option value="Supplies">Supplies</option>
              <option value="Raw Materials">Raw Materials</option>
              <option value="Finished Goods">Finished Goods</option>
            </select>
            <select id="filter-status">
              <option value="">All Statuses</option>
              <option value="In Stock">In Stock</option>
              <option value="Low Stock">Low Stock</option>
              <option value="Out of Stock">Out of Stock</option>
            </select>
            <button type="button" id="clear-all-btn" class="btn btn-clear-all">Clear All Items</button>
          </div>
        </div>
        <div class="table-wrapper">
          <table id="inventory-table">
            <thead>
              <tr>
                <th>Item ID</th>
                <th>Name</th>
                <th>Category</th>
                <th>Qty</th>
                <th>Unit Price</th>
                <th>Total Value</th>
                <th>Status</th>
                <th>Date Added</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="inventory-tbody"></tbody>
          </table>
        </div>
        <p id="no-items-msg" class="empty-msg" style="display:none;">No items found.</p>
      </div>
    </section>

  </main>
</div>

<!-- SQL.js must load before Chart.js and app.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.10.2/sql-wasm.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
<script src="app.js"></script>
</body>
</html>
